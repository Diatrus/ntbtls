/* ntbtls.h -  Not Too Bad TLS                                  -*- c -*-
 * Copyright (C) 2014 g10 Code GmbH
 *
 * This file is part of NTBTLS
 *
 * NTBTLS is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 3 of the License, or
 * (at your option) any later version.
 *
 * NTBTLS is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program; if not, see <http://www.gnu.org/licenses/>.
 *
 * File: @configure_input@
 */

#ifndef _NTBTLS_H
#define _NTBTLS_H

#include <gpg-error.h>

#ifdef __cplusplus
extern "C" {
#if 0 /* (Keep Emacsens' auto-indent happy.) */
}
#endif
#endif

/* The version of this header should match the one of the library. It
   should not be used by a program because ntbtls_check_version()
   should return the same version.  The purpose of this macro is to
   let autoconf (using the AM_PATH_NTBTLS macro) check that this
   header matches the installed library.  */
#define NTBTLS_VERSION "@VERSION@"

/* The version number of this header.  It may be used to handle minor
   API incompatibilities.  */
#define NTBTLS_VERSION_NUMBER @VERSION_NUMBER@


/* Flags used by ntbtls_init.  */
#define NTBTLS_INIT_SERVER  0
#define NTBTLS_INIT_CLIENT  1


/* The TLS context object.  */
struct _ntbtls_context_s;
typedef struct _ntbtls_context_s *ntbtls_t;



/* Create a new TLS context.  */
gpg_error_t ntbtls_init (ntbtls_t *r_tls, unsigned int flags);

gpg_error_t ntbtls_set_transport (ntbtls_t tls,
                                  gpgrt_stream_t inbound,
                                  gpgrt_stream_t outbound);

gpg_error_t ntbtls_get_stream (ntbtls_t tls,
                               gpgrt_stream_t *r_readfp,
                               gpgrt_stream_t *r_writefp);

gpg_error_t ntbtls_handshake (ntbtls_t tls);



#if 0 /* (Keep Emacsens' auto-indent happy.) */
{
#endif
#ifdef __cplusplus
}
#endif
#endif /* _NTBTLS_H */
/*
@emacs_local_vars_begin@
@emacs_local_vars_read_only@
@emacs_local_vars_end@
*/
